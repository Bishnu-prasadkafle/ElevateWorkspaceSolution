{% extends "base.html" %}
{% block title %}Home - Elevate Workforce Solutions{% endblock %}

{% block extra_css %}
<style>
    :root {
        --primary: #3498db;
        --primary-dark: #2980b9;
        --dark: #2c3e50;
        --light: #f8f9fa;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { overflow-x: hidden; font-family: 'Inter', 'Segoe UI', sans-serif; line-height: 1.7; background: #fff; }

    /* FULLSCREEN HERO — SAME AS ABOUT & SERVICES */
    .hero-wrapper {
        position: relative;
        height: 100vh;
        min-height: 700px;
        overflow: hidden;
    }

    .carousel-container {
        position: absolute;
        inset: 0;
        width: 100%;
        height: 100%;
    }

    .carousel-slide {
        position: absolute;
        inset: 0;
        background-size: cover;
        background-position: center;
        opacity: 0;
        transition: opacity 1s ease-in-out;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .carousel-slide.active { opacity: 1; z-index: 1; }

    .carousel-slide::before {
        content: '';
        position: absolute;
        inset: 0;
        background: linear-gradient(135deg,
            rgba(0,0,0,0.78) 0%,
            rgba(0,0,0,0.5) 50%,
            rgba(52,152,219,0.5) 100%);
        z-index: 1;
    }

    .carousel-content {
        position: relative;
        z-index: 2;
        text-align: center;
        color: white;
        max-width: 1200px;
        padding: 0 20px;
        animation: fadeInUp 1.3s ease-out forwards;
    }

    @keyframes fadeInUp {
        from { opacity: 0; transform: translateY(60px); }
        to   { opacity: 1; transform: translateY(0); }
    }

    .carousel-content h1 {
        font-size: 6.8rem;
        font-weight: 900;
        letter-spacing: -5px;
        margin-bottom: 1.5rem;
        background: linear-gradient(90deg, #ffffff, #bdc3c7);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        text-shadow: 0 15px 40px rgba(0,0,0,0.8);
    }

    .carousel-content .lead {
        font-size: 2rem;
        font-weight: 300;
        opacity: 0.95;
        margin-bottom: 1rem;
        text-shadow: 0 8px 30px rgba(0,0,0,0.7);
    }

    .carousel-content p {
        font-size: 1.3rem;
        opacity: 0.9;
        text-shadow: 0 6px 20px rgba(0,0,0,0.6);
    }

    .carousel-dots {
        position: absolute;
        bottom: 60px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 18px;
        z-index: 10;
    }

    .dot {
        width: 16px;
        height: 16px;
        border-radius: 50%;
        background: rgba(255,255,255,0.3);
        border: 3px solid rgba(255,255,255,0.7);
        cursor: pointer;
        transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        backdrop-filter: blur(8px);
    }

    .dot.active {
        background: white;
        width: 55px;
        border-radius: 30px;
        box-shadow: 0 0 30px rgba(255,255,255,0.9);
    }

    .section-wrapper { padding: 110px 0; }
    .bg-light { background: #f8f9fa; }

    .section-title h2 {
        font-size: 3.4rem;
        font-weight: 800;
        text-align: center;
        margin-bottom: 70px;
        position: relative;
        display: inline-block;
        left: 50%;
        transform: translateX(-50%);
    }

    .section-title h2::after {
        content: '';
        position: absolute;
        bottom: -15px;
        left: 50%;
        transform: translateX(-50%);
        width: 100px;
        height: 6px;
        background: var(--primary);
        border-radius: 3px;
    }

    .feature-card, .job-card {
        background: white;
        border-radius: 24px;
        padding: 50px 30px;
        text-align: center;
        box-shadow: 0 15px 50px rgba(0,0,0,0.1);
        transition: all 0.5s ease;
        position: relative;
        overflow: hidden;
        height: 100%;
    }

    .feature-card::before, .job-card::before {
        content: '';
        position: absolute;
        top: 0; left: 0; right: 0;
        height: 8px;
        background: linear-gradient(90deg, #3498db, #9b59b6, #e74c3c);
    }

    .feature-card:hover, .job-card:hover {
        transform: translateY(-20px) scale(1.04);
        box-shadow: 0 40px 90px rgba(52,152,219,0.3);
        cursor: pointer;
    }

    .icon-circle {
        width: 110px;
        height: 110px;
        margin: 0 auto 30px;
        border-radius: 50%;
        background: linear-gradient(135deg, var(--primary), var(--primary-dark));
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 3.5rem;
        color: white;
        box-shadow: 0 20px 50px rgba(52,152,219,0.5);
    }

    @media (max-width: 768px) {
        .carousel-content h1 { font-size: 3.8rem; letter-spacing: -2px; }
        .carousel-content .lead { font-size: 1.5rem; }
        .section-wrapper { padding: 80px 0; }
    }
</style>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700;800;900&display=swap" rel="stylesheet">
{% endblock %}

{% block content %}

<!-- FULLSCREEN HERO CAROUSEL -->
<div class="hero-wrapper">
    <div class="carousel-container">
        <div class="carousel-slide active" style="background-image: url('https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=1920&fit=crop');">
            <div class="carousel-content">
                <h1>Find Your Dream Job</h1>
                <p class="lead">Thousands of opportunities from Nepal’s top companies</p>
                <p>Join 100,000+ professionals growing their careers with us</p>
            </div>
        </div>

        <div class="carousel-slide" style="background-image: url('https://images.unsplash.com/photo-1559136555-9303baea8ebd?w=1920&fit=crop');">
            <div class="carousel-content">
                <h1>Hire Top Talent Fast</h1>
                <p class="lead">Access Nepal’s largest verified candidate pool</p>
                <p>Build your dream team with AI-powered matching</p>
            </div>
        </div>

        <div class="carousel-slide" style="background-image: url('https://images.unsplash.com/photo-1519389950473-47ba0277781c?w=1920&fit=crop');">
            <div class="carousel-content">
                <h1>Grow Together</h1>
                <p class="lead">Success starts with the right connection</p>
                <p>Elevate your career. Elevate your company.</p>
            </div>
        </div>

        <div class="carousel-dots">
            <span class="dot active" onclick="currentSlide(0)"></span>
            <span class="dot" onclick="currentSlide(1)"></span>
            <span class="dot" onclick="currentSlide(2)"></span>
        </div>
    </div>
</div>

<!-- WHY CHOOSE US -->
<section class="section-wrapper bg-light">
    <div class="container">
        <div class="section-title">
            <h2>Why Choose Elevate?</h2>
        </div>
        <div class="row g-5">
            <div class="col-lg-4">
                <div class="feature-card">
                    <div class="icon-circle"><i class="fas fa-shield-alt"></i></div>
                    <h4>100% Verified</h4>
                    <p>Every company and candidate is thoroughly verified</p>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="feature-card">
                    <div class="icon-circle"><i class="fas fa-bolt"></i></div>
                    <h4>AI Smart Matching</h4>
                    <p>Get perfect job recommendations instantly</p>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="feature-card">
                    <div class="icon-circle"><i class="fas fa-headset"></i></div>
                    <h4>24/7 Support</h4>
                    <p>We’re here whenever you need us</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- FEATURED JOBS -->
{% if featured_jobs %}
<section class="section-wrapper">
    <div class="container">
        <div class="section-title">
            <h2>Featured Jobs</h2>
        </div>
        <div class="row g-5">
            {% for job in featured_jobs %}
            <div class="col-lg-4 col-md-6">
                <div class="job-card" onclick="window.location='{% url 'jobs:job_detail' job.pk %}'">
                    <h5 class="fw-bold">{{ job.title }}</h5>
                    <p class="text-muted mb-2"><i class="fas fa-building"></i> {{ job.company.company_name }}</p>
                    <p class="small text-muted">
                        <i class="fas fa-map-marker-alt"></i> {{ job.location }} • {{ job.get_job_type_display }}
                    </p>
                    {% if job.salary_min and job.salary_max %}
                    <p class="fw-bold text-success mt-3">{{ job.get_salary_range }}</p>
                    {% endif %}
                    <small class="text-muted"><i class="fas fa-clock"></i> {{ job.posted_at|timesince }} ago</small>
                </div>
            </div>
            {% endfor %}
        </div>
        <div class="text-center mt-5">
            <a href="{% url 'jobs:job_list' %}" class="btn btn-primary btn-lg px-5">Browse All {{ total_jobs }} Jobs</a>
        </div>
    </div>
</section>
{% endif %}

<!-- FINAL CTA — EXACTLY SAME AS YOUR ABOUT PAGE (WHITE BOX ON DARK) -->
<div class="bg-dark py-5">
    <div class="container text-center py-5 bg-light rounded-4 shadow-lg">
        <h2 class="mb-4 fw-bold">Join Our Growing Community Today</h2>
        <p class="lead mb-5 text-muted">Be part of the employment revolution in Nepal</p>
        {% if not user.is_authenticated %}
        <div>
            <a href="{% url 'accounts:register' %}" class="btn btn-primary btn-lg me-3 px-5">Get Started</a>
            <a href="{% url 'contact' %}" class="btn btn-outline-primary btn-lg px-5">Contact Us</a>
        </div>
        {% else %}
            {% if user.is_company %}
            <a href="{% url 'jobs:create_job' %}" class="btn btn-primary btn-lg px-5">Post a Job</a>
            {% else %}
            <a href="{% url 'jobs:job_list' %}" class="btn btn-primary btn-lg px-5">Explore Jobs</a>
            {% endif %}
        {% endif %}
    </div>
</div>

{% endblock %}

{% block extra_js %}
<script>
    let currentSlideIndex = 0;
    const slides = document.querySelectorAll('.carousel-slide');
    const dots = document.querySelectorAll('.dot');
    
    function showSlide(index) {
        slides.forEach(slide => slide.classList.remove('active'));
        dots.forEach(dot => dot.classList.remove('active'));
        
        slides[index].classList.add('active');
        dots[index].classList.add('active');
    }
    
    function changeSlide(direction) {
        currentSlideIndex += direction;
        if (currentSlideIndex >= slides.length) currentSlideIndex = 0;
        if (currentSlideIndex < 0) currentSlideIndex = slides.length - 1;
        showSlide(currentSlideIndex);
    }
    
    function currentSlide(index) {
        currentSlideIndex = index;
        showSlide(currentSlideIndex);
    }
    
    setInterval(() => changeSlide(1), 5000);
    showSlide(0);
</script>
{% endblock %}