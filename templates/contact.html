{% extends "base.html" %}
{% load static %}

{% block title %}Contact Us - Elevate Workforce Solutions{% endblock %}

{% block extra_css %}
<style>
    :root {
        --primary: #3498db;
        --primary-dark: #2980b9;
        --secondary: #9b59b6;
        --dark: #2c3e50;
        --light: #f8f9fa;
        --success: #2ecc71;
    }

    body { 
        font-family: 'Inter', sans-serif; 
        background: #fff; 
        line-height: 1.7;
        color: #333;
    }

    /* MAP HERO SECTION - Enhanced */
    .map-hero-wrapper {
        position: relative;
        height: 100vh;
        min-height: 800px;
        overflow: hidden;
        display: flex;
        align-items: center;
    }

    .map-background {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        z-index: 0;
    }

    .map-background iframe {
        width: 100%;
        height: 100%;
        border: 0;
        filter: grayscale(0.2) brightness(0.9);
        pointer-events: auto;
    }

    .map-overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
            135deg,
            rgba(52, 152, 219, 0.15) 0%,
            rgba(155, 89, 182, 0.15) 50%,
            rgba(231, 76, 60, 0.1) 100%
        );
        z-index: 1;
        -webkit-backdrop-filter: blur(1px);
        backdrop-filter: blur(1px);
    }

    .hero-form-container {
        position: relative;
        z-index: 2;
        width: 100%;
        padding: 60px 0;
    }

    .form-hero-wrapper {
        background: rgba(255, 255, 255, 0.96);
        border-radius: 32px;
        padding: 60px 55px;
        box-shadow: 
            0 40px 100px rgba(0, 0, 0, 0.25),
            0 0 0 1px rgba(255, 255, 255, 0.6);
        -webkit-backdrop-filter: blur(20px);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.8);
        max-width: 750px;
        margin: 0 auto;
        animation: slideUp 0.9s cubic-bezier(0.16, 1, 0.3, 1);
        transform-origin: center;
    }

    @keyframes slideUp {
        from {
            opacity: 0;
            transform: translateY(60px) scale(0.95);
        }
        to {
            opacity: 1;
            transform: translateY(0) scale(1);
        }
    }

    .form-hero-wrapper h1 {
        font-size: 3.8rem;
        font-weight: 900;
        background: linear-gradient(135deg, #3498db 0%, #9b59b6 50%, #e74c3c 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 15px;
        text-align: center;
        letter-spacing: -1px;
    }

    .form-hero-wrapper .lead {
        text-align: center;
        color: #555;
        font-size: 1.25rem;
        margin-bottom: 45px;
        font-weight: 500;
    }

    /* Form Styling - Professional */
    .form-control, .form-select {
        border: 2px solid #e3e8ef;
        border-radius: 14px;
        padding: 16px 22px;
        font-size: 1rem;
        transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
        background: rgba(248, 249, 250, 0.8);
        font-weight: 500;
    }

    .form-control:focus {
        border-color: var(--primary);
        background: white;
        box-shadow: 
            0 0 0 4px rgba(52, 152, 219, 0.12),
            0 4px 12px rgba(52, 152, 219, 0.15);
        outline: none;
        transform: translateY(-1px);
    }

    .form-control::placeholder {
        color: #95a5a6;
        font-weight: 400;
    }

    textarea.form-control {
        resize: vertical;
        min-height: 140px;
    }

    .btn-submit {
        background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
        color: white;
        padding: 18px 50px;
        font-size: 1.2rem;
        font-weight: 700;
        border-radius: 50px;
        border: none;
        width: 100%;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 12px 35px rgba(52, 152, 219, 0.35);
        cursor: pointer;
        position: relative;
        overflow: hidden;
    }

    .btn-submit::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
        transition: left 0.5s;
    }

    .btn-submit:hover::before {
        left: 100%;
    }

    .btn-submit:hover {
        transform: translateY(-5px);
        box-shadow: 0 20px 50px rgba(52, 152, 219, 0.5);
        background: linear-gradient(135deg, #2980b9 0%, #3498db 100%);
    }

    .btn-submit:active {
        transform: translateY(-2px);
    }

    /* Success Message - Enhanced */
    .success-message {
        background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
        color: white;
        padding: 28px;
        border-radius: 20px;
        text-align: center;
        margin-bottom: 35px;
        box-shadow: 0 15px 40px rgba(46, 204, 113, 0.35);
        animation: slideDown 0.6s cubic-bezier(0.16, 1, 0.3, 1);
        border: 1px solid rgba(255, 255, 255, 0.3);
    }

    .success-message i {
        animation: scaleIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.3s backwards;
    }

    @keyframes slideDown {
        from {
            opacity: 0;
            transform: translateY(-30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes scaleIn {
        from {
            transform: scale(0);
        }
        to {
            transform: scale(1);
        }
    }

    /* Section Styling */
    .section-wrapper { 
        padding: 120px 0; 
    }

    .section-title h2 {
        font-size: 3.5rem;
        font-weight: 900;
        text-align: center;
        margin-bottom: 70px;
        position: relative;
        display: inline-block;
        left: 50%;
        transform: translateX(-50%);
        background: linear-gradient(135deg, var(--dark) 0%, var(--primary) 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .section-title h2::after {
        content: '';
        position: absolute;
        bottom: -18px;
        left: 50%;
        transform: translateX(-50%);
        width: 120px;
        height: 6px;
        background: linear-gradient(90deg, #3498db, #9b59b6, #e74c3c);
        border-radius: 3px;
    }

    .connect-with-us-title {
        font-size: 2.5rem;
    }

    /* Contact Cards - Professional */
    .contact-card {
        background: white;
        border-radius: 28px;
        padding: 55px 40px;
        text-align: center;
        box-shadow: 
            0 20px 60px rgba(0, 0, 0, 0.08),
            0 0 0 1px rgba(0, 0, 0, 0.03);
        transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        height: 100%;
        position: relative;
        overflow: hidden;
    }

    .contact-card::before {
        content: '';
        position: absolute;
        top: 0; 
        left: 0; 
        right: 0;
        height: 6px;
        background: linear-gradient(90deg, #3498db 0%, #9b59b6 50%, #e74c3c 100%);
        transition: height 0.4s ease;
    }

    .contact-card:hover::before {
        height: 8px;
    }

    .contact-card:hover {
        transform: translateY(-15px);
        box-shadow: 
            0 40px 90px rgba(52, 152, 219, 0.2),
            0 0 0 1px rgba(52, 152, 219, 0.1);
    }

    .icon-circle {
        width: 110px;
        height: 110px;
        margin: 0 auto 30px;
        border-radius: 50%;
        background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2.8rem;
        color: white;
        box-shadow: 
            0 20px 50px rgba(52, 152, 219, 0.4),
            inset 0 -5px 20px rgba(0, 0, 0, 0.2);
        transition: all 0.4s ease;
    }

    .contact-card:hover .icon-circle {
        transform: scale(1.1) rotate(10deg);
        box-shadow: 
            0 25px 60px rgba(52, 152, 219, 0.5),
            inset 0 -5px 20px rgba(0, 0, 0, 0.2);
    }

    .contact-card h4 {
        font-size: 1.5rem;
        font-weight: 700;
        margin-bottom: 15px;
        color: var(--dark);
    }

    .contact-card a {
        color: var(--primary);
        text-decoration: none;
        font-weight: 700;
        font-size: 1.1rem;
        transition: all 0.3s ease;
    }

    .contact-card a:hover {
        color: var(--primary-dark);
        text-decoration: underline;
    }

    /* FAQ Cards - Professional */
    .faq-card {
        background: white;
        border-radius: 20px;
        padding: 32px 35px;
        margin-bottom: 20px;
        box-shadow: 
            0 10px 40px rgba(0, 0, 0, 0.06),
            0 0 0 1px rgba(0, 0, 0, 0.03);
        cursor: pointer;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        border-left: 5px solid var(--primary);
    }

    .faq-card:hover { 
        transform: translateX(8px);
        box-shadow: 
            0 15px 50px rgba(52, 152, 219, 0.15),
            0 0 0 1px rgba(52, 152, 219, 0.1);
    }

    .faq-question {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-weight: 700;
        font-size: 1.2rem;
        color: var(--dark);
    }

    .faq-question i {
        transition: transform 0.4s ease;
        color: var(--primary);
        font-size: 1rem;
    }

    .faq-card.active .faq-question i {
        transform: rotate(180deg);
    }

    .faq-answer {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        padding-top: 0;
        color: #666;
        font-size: 1.05rem;
        line-height: 1.7;
    }

    .faq-card.active .faq-answer {
        max-height: 250px;
        padding-top: 22px;
    }

    /* Social Media - Professional Icons */
    .social-circle {
        width: 65px;
        height: 65px;
        background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
        color: white;
        border-radius: 50%;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        font-size: 1.6rem;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        margin: 0 12px;
        text-decoration: none;
        box-shadow: 0 10px 30px rgba(52, 152, 219, 0.3);
        position: relative;
        overflow: hidden;
    }

    .social-circle::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, rgba(255,255,255,0.3), transparent);
        opacity: 0;
        transition: opacity 0.3s ease;
    }

    .social-circle:hover::before {
        opacity: 1;
    }

    .social-circle:hover {
        transform: translateY(-12px) scale(1.15);
        box-shadow: 0 20px 45px rgba(52, 152, 219, 0.45);
        color: white;
    }

    /* Social Media Specific Colors */
    .social-facebook:hover {
        background: linear-gradient(135deg, #1877f2, #0d5dbf);
    }

    .social-linkedin:hover {
        background: linear-gradient(135deg, #0077b5, #005582);
    }

    .social-twitter:hover {
        background: linear-gradient(135deg, #1da1f2, #0c85d0);
    }

    .social-instagram:hover {
        background: linear-gradient(135deg, #e4405f, #c13584);
    }

    /* Final CTA Section */
    .cta-wrapper {
        background: linear-gradient(135deg, var(--dark) 0%, #34495e 100%);
        padding: 80px 0;
    }

    .cta-content {
        background: white;
        padding: 80px 60px;
        border-radius: 32px;
        box-shadow: 0 30px 80px rgba(0, 0, 0, 0.3);
    }

    .cta-content h2 {
        font-size: 3rem;
        font-weight: 900;
        margin-bottom: 20px;
        color: var(--dark);
    }

    .cta-content .lead {
        font-size: 1.3rem;
        color: #7f8c8d;
        margin-bottom: 45px;
    }

    .btn-cta {
        padding: 18px 50px;
        font-size: 1.2rem;
        font-weight: 700;
        border-radius: 50px;
        transition: all 0.4s ease;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
    }

    .btn-cta:hover {
        transform: translateY(-5px);
        box-shadow: 0 20px 50px rgba(0, 0, 0, 0.25);
    }

    /* Responsive Design */
    @media (max-width: 992px) {
        .map-hero-wrapper {
            min-height: 700px;
        }
        
        .form-hero-wrapper h1 {
            font-size: 3rem;
        }
        
        .section-title h2 {
            font-size: 2.8rem;
        }
    }

    @media (max-width: 768px) {
        .map-hero-wrapper { 
            min-height: 500px; 
            height: auto; 
            padding: 50px 0; 
        }
        
        .form-hero-wrapper { 
            padding: 45px 30px; 
            border-radius: 24px;
            margin: 0 15px;
        }
        
        .form-hero-wrapper h1 { 
            font-size: 2.5rem; 
        }
        
        .form-hero-wrapper .lead { 
            font-size: 1.1rem; 
        }

        .section-wrapper {
            padding: 80px 0;
        }

        .section-title h2 {
            font-size: 2.2rem;
        }

        .contact-card {
            margin-bottom: 30px;
        }

        .cta-content {
            padding: 50px 30px;
        }

        .cta-content h2 {
            font-size: 2.2rem;
        }

        .social-circle {
            width: 55px;
            height: 55px;
            font-size: 1.3rem;
            margin: 0 8px;
        }
    }

    @media (max-width: 576px) {
        .form-hero-wrapper h1 {
            font-size: 2rem;
        }

        .btn-cta {
            display: block;
            margin: 10px 0 !important;
            width: 100%;
        }
    }
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
{% endblock %}

{% block content %}

<!-- MAP HERO WITH TRANSPARENT FORM -->
<div class="map-hero-wrapper">
    <!-- Interactive Kathmandu Map Background -->
    <div class="map-background">
        <iframe
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d113032.64155477067!2d85.29111840820312!3d27.70899480000001!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x39eb198a307baabf%3A0xb5137c1bf18db1ea!2sKathmandu%2C%20Nepal!5e0!3m2!1sen!2s!4v1234567890123!5m2!1sen!2s"
            allowfullscreen=""
            title="Kathmandu Location Map">
        </iframe>
    </div>
    
    <!-- Subtle Gradient Overlay -->
    <div class="map-overlay"></div>
    
    <!-- Transparent Contact Form -->
    <div class="hero-form-container">
        <div class="container">
            <div class="form-hero-wrapper">
                <h1>Get in Touch</h1>
                <p class="lead">We're here to help you succeed</p>

                {% if form_submitted %}
                <div class="success-message">
                    <i class="fas fa-check-circle fa-2x mb-2"></i><br>
                    <strong>Thank you!</strong> Your message has been sent successfully.
                </div>
                {% endif %}

                <form method="POST" novalidate>
                    {% csrf_token %}
                    <div class="row g-4">
                        <div class="col-md-6">
                            <input type="text" name="name" class="form-control" placeholder="Full Name *" required value="{{ request.POST.name }}">
                        </div>
                        <div class="col-md-6">
                            <input type="email" name="email" class="form-control" placeholder="Email Address *" required value="{{ request.POST.email }}">
                        </div>
                        <div class="col-md-6">
                            <input type="tel" name="phone" class="form-control" placeholder="Phone Number" value="{{ request.POST.phone }}">
                        </div>
                        <div class="col-md-6">
                            <input type="text" name="subject" class="form-control" placeholder="Subject *" required value="{{ request.POST.subject }}">
                        </div>
                        <div class="col-12">
                            <textarea name="message" class="form-control" rows="5" placeholder="Your Message *" required>{{ request.POST.message }}</textarea>
                        </div>
                        <div class="col-12 text-center mt-4">
                            <button type="submit" class="btn btn-submit">
                                <i class="fas fa-paper-plane me-2"></i>Send Message
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- CONTACT INFO CARDS -->
<section class="section-wrapper bg-light">
    <div class="container">
        <div class="row g-5">
            <div class="col-lg-4">
                <div class="contact-card">
                    <div class="icon-circle">
                        <i class="fas fa-envelope"></i>
                    </div>
                    <h4>Email Us</h4>
                    <p><a href="mailto:{{ email }}">{{ email }}</a></p>
                    <small class="text-muted">We reply within 24 hours</small>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="contact-card">
                    <div class="icon-circle">
                        <i class="fas fa-phone-alt"></i>
                    </div>
                    <h4>Call Us</h4>
                    <p><a href="tel:{{ phone }}">{{ phone }}</a></p>
                    <small class="text-muted">Mon–Fri, 9 AM – 5 PM</small>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="contact-card">
                    <div class="icon-circle">
                        <i class="fas fa-map-marker-alt"></i>
                    </div>
                    <h4>Visit Us</h4>
                    <p class="fw-bold mb-2">{{ address }}<br>Kathmandu, Nepal</p>
                    <small class="text-muted">We'd love to meet you</small>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- FAQ SECTION -->
<section class="section-wrapper">
    <div class="container">
        <div class="section-title">
            <h2>Frequently Asked Questions</h2>
        </div>
        <div class="row">
            <div class="col-lg-8 mx-auto">
                <div class="faq-card active">
                    <div class="faq-question">
                        <span><i class="fas fa-clock me-3"></i>How quickly do you respond?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        We respond to all messages within 24 business hours. Urgent? Call us directly!
                    </div>
                </div>
                <div class="faq-card">
                    <div class="faq-question">
                        <span><i class="fas fa-calendar-check me-3"></i>Can I schedule a call?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        Absolutely! Just mention your preferred time and we'll set it up.
                    </div>
                </div>
                <div class="faq-card">
                    <div class="faq-question">
                        <span><i class="fas fa-shield-alt me-3"></i>Is my information secure?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        100%. We use bank-level encryption and never share your data.
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- SOCIAL MEDIA SECTION -->
<section class="section-wrapper bg-light">
    <div class="container text-center">
        <h3 class="mb-5 fw-bold connect-with-us-title">Connect With Us</h3>
        <div class="d-inline-flex gap-3 flex-wrap justify-content-center">
            <a href="#" class="social-circle social-facebook" aria-label="Facebook">
                <i class="fab fa-facebook-f"></i>
            </a>
            <a href="#" class="social-circle social-linkedin" aria-label="LinkedIn">
                <i class="fab fa-linkedin-in"></i>
            </a>
            <a href="#" class="social-circle social-twitter" aria-label="Twitter">
                <i class="fab fa-twitter"></i>
            </a>
            <a href="#" class="social-circle social-instagram" aria-label="Instagram">
                <i class="fab fa-instagram"></i>
            </a>
        </div>
    </div>
</section>

<!-- FINAL CTA SECTION -->
<div class="cta-wrapper">
    <div class="container">
        <div class="cta-content text-center">
            <h2>Ready to Get Started?</h2>
            <p class="lead">Join thousands growing with Elevate</p>
            {% if not user.is_authenticated %}
            <div>
                <a href="{% url 'accounts:register' %}" class="btn btn-primary btn-cta me-3 px-5">
                    <i class="fas fa-rocket me-2"></i>Get Started Free
                </a>
                <a href="{% url 'accounts:login' %}" class="btn btn-outline-primary btn-cta px-5">
                    <i class="fas fa-sign-in-alt me-2"></i>Sign In
                </a>
            </div>
            {% else %}
                {% if user.is_company %}
                <a href="{% url 'jobs:create_job' %}" class="btn btn-primary btn-cta px-5">
                    <i class="fas fa-briefcase me-2"></i>Post a Job Now
                </a>
                {% else %}
                <a href="{% url 'jobs:job_list' %}" class="btn btn-primary btn-cta px-5">
                    <i class="fas fa-search me-2"></i>Explore Jobs
                </a>
                {% endif %}
            {% endif %}
        </div>
    </div>
</div>

{% endblock %}

{% block extra_js %}
<script>
    // FAQ Toggle Functionality
    document.querySelectorAll('.faq-card').forEach(card => {
        card.addEventListener('click', function() {
            // Close other FAQs
            document.querySelectorAll('.faq-card').forEach(otherCard => {
                if (otherCard !== card) {
                    otherCard.classList.remove('active');
                }
            });
            // Toggle current FAQ
            this.classList.toggle('active');
        });
    });

    // Smooth scroll for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });

    // Form validation feedback
    const form = document.querySelector('form');
    if (form) {
        form.addEventListener('submit', function(e) {
            const inputs = form.querySelectorAll('input[required], textarea[required]');
            let isValid = true;
            
            inputs.forEach(input => {
                if (!input.value.trim()) {
                    input.style.borderColor = '#e74c3c';
                    isValid = false;
                } else {
                    input.style.borderColor = '#e3e8ef';
                }
            });
            
            if (!isValid) {
                e.preventDefault();
            }
        });
    }
</script>
{% endblock %}